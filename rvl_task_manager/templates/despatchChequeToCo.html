<!DOCTYPE html>
<html>
<head>
    <link type="text/css" href="/static/css/bootstrap.css" rel="stylesheet" />
    <link type="text/css" href="/static/css/jquery.selectBoxIt.css" rel="stylesheet" />
    <link type="text/css" href="/static/css/task.css" rel="stylesheet" />
    <!-- Madura css -->
    <link rel="stylesheet" href="/static/css/font-icons/entypo/css/entypo.css" id="style-resource-2">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Noto+Sans:400,700,400italic" id="style-resource-3">
    <link rel="stylesheet" href="/static/css/neon-core-min.css" id="style-resource-5">
    <link rel="stylesheet" href="/static/css/neon-theme-min.css" id="style-resource-6">
    <link rel="stylesheet" href="/static/css/neon-form-min.css" id="style-resource-7">
    <link rel="stylesheet" href="/static/css/jalert.css">
    <link rel="stylesheet" href="/static/css/form.css">
    <link rel="stylesheet" href="/static/css/custom2.css">
    <!-- custom css for loan officer process -->
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link type="text/css" href="/static/css/jquery-confirm.css" rel="stylesheet"  />

    <!-- Scripts -->
    <script type="text/javascript" src="/static/js/1.9.1-jquery.min.js"></script>
    <!-- Main Library js-->
    <script type="text/javascript" src="/static/js/jquery-ui.min.js"></script>
    <!-- Main Library js-->
    <script type="text/javascript" src="/static/js/jquery-confirm.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap.js"></script>
    <!-- Bootstrap js-->
    <script type="text/javascript" src="/static/js/jquery.selectBoxIt.js"></script>
    <script type="text/javascript" src="/static/js/crossfilter.js"></script>

    <!--MASTER DATA -->
    <script type="text/javascript" src="/static/form/masterData.js"></script>
    <script type="text/javascript" src="/static/form/masterDataLoad.js"></script>

    <style>
        .center-pane {
            width: 50%;
            margin: 3% auto;
            display: block;
            border: 2px solid sienna;
            border-radius: 10px;
        }
        
        .colomn-div input {
            display: inline-block;
            width: 45%;
            margin-left: 5%;
        }
        
        .colomn-div select {
            display: inline-block;
            width: 30%;
            margin-left: 3%;
        }
        
        .h3-heading h3 {
            padding-top: 20px;
            color: white;
            font-weight: bolder;
            margin-top: initial;
        }
        
        .ml_fk_alf_node_ref_img {
            margin-left: 25px;
            width: 50%;
        }
        
        .colomn-div label {
            font-size: 13px;
            display: inline-block;
            width: 35%;
            text-align: left;
            padding-left: 10%;
        }
    </style>

  
</head>

<body>
    <!-- Top Bar -->
    <div class="navbar navbar-fixed-top">
        {% include "header_common.html" %}
    </div>

    <form action="." id="despatch-form">
        <!--{% csrf_token %}-->
        <!-- Main Content -->
        <div class="main">
            <div class="task-div">
                <div class="main-task">
                    <div class="right-pane-task" id="right-pane-task">
                        <div id="tabs">
                            <ul id="form-tab" style="padding:4px;">
                                <li class="labelDispatchDocs" style="display:block;"> Dispatch Documents to CO</li>
                                <li class="labelReDispatchDocs" style="display:none;">Redispatch Documents to CO</li>
                                <li style="float:right;list-style-type:none;">
                                    <span class="document-toggle" style="float:right;display:inline-block;padding-bottom:10px;cursor:pointer;"><i class="entypo-attach"></i>Documents</span>
                                </li>
                                <li style="float:right;">
                                    <span class="comment-toggle" style="float:right;display:inline-block;padding-bottom:0px;cursor:pointer;"><i class="entypo-chat"></i> Comments</span>
                                </li>
                            </ul>
                        </div>
                        <div id="commentsModal" class="modal">
                            <div class="modal-content">
                                <span class="close">x</span>
                                <p> <strong><i class="entypo-chat">COMMENTS	</i></strong></p>
                                <div class="modal-body" id="commentsTab">
                                </div>
                            </div>
                        </div>
                        <div id="documentsModal" class="modal">
                            <div class="modal-content">
                                <span class="close">x</span>
                                <p> <strong><i class="entypo-attach">DOCUMENTS ATTACHED</i></strong></p>
                                <div class="modal-body" id="documentsTab">
                                </div>
                            </div>
                        </div>
                        <div class="right-pane-task-detail detail-max" id="right-pane-task-detail" style="background-color: rgba(218, 216, 216, 0.2);">
                            <div class="center-pane">
                                <!--Div HEader-->
                                <div class="h3-heading">
                                    <h3 class="labelDispatchDocs" style="display:block;">Dispatch Documents to CO</h3>
                                    <h3 class="labelReDispatchDocs" style="display:none;">Redispatch Documents to CO</h3>
                                    <h4 id="loan_id">Loan No : <span id="loan_Id">514243656648453</span>    &   Member Id : <span id="member_Id">551</span> </h4>
                                </div>
                                <!--INput Values-->
                                <div class="member_class">
                                    <div class="colomn-div" id="courierNameDiv">
                                        <label>Courier Name</label>
                                        <font>  : </font>
                                        <select id="doc_courier_name" class="extra select form-control chq_courier_name" name="chq_courier_name" onchange="courierNameInput(this.value,this.id);" placeholder="chq_courier_name"></select>
                                        <font class="mandatory">*</font>
                                    </div>
                                </div>
                                <div class="member_class">
                                    <div class="colomn-div">
                                        <label>Courier Number/Tracking Id</label>
                                        <font>  : </font>
                                        <input type="text" id="doc_courier_tracking_id" name="doc_courier_tracking_id" placeholder="COURIER NUMBER/ TRACKING ID" />
                                        <br>
                                        <br>
                                    </div>
                                </div>
                                <div class="member_class">
                                    <div class="colomn-div">
                                        <label>Receipt Number</label>
                                        <font>  : </font>
                                        <input type="text" id="doc_courier_receipt_number" name="doc_courier_receipt_number" placeholder="RECEIPT NUMBER" />
                                        </br>
                                    </div>
                                </div>
                                <div class="member_class">
                                    <div class="colomn-div">
                                        <label>Date</label>
                                        <font>  : </font>
                                        <input type="date" id="doc_courier_handover_date" name="doc_courier_handover_date" placeholder="DATE" />
                                        </br>
                                    </div>
                                </div>
                                <div class="member_class">
                                    <div class="colomn-div">
                                        <label>Place</label>
                                        <font>  : </font>
                                        <input type="text" id="place" name="place" placeholder="PLACE" />
                                        </br>
                                    </div>
                                </div>
                            </div>
                            <!--Submit Button DIv-->
                            <div class="form-group text-center">
                                <div class="form-button" id="despatch_button">
                                    <a href="javascript:void(0)" onclick='window.location="/tasks/"' class="btn btn-red btn-icon icon-left" style="height:30px;padding-left:40px;">
                                        <i class="icon-entypo-cancel" style="width:30px;height: 28px;color: white;padding:6px;"></i> Cancel
                                    </a>
                                    <a onclick="onSubmitDispatchDocForm('New','1');" class="btn btn-red btn-icon icon-left" style="height:30px;padding-left:40px;">
                                        <i class="icon-entypo-check" style="width:30px;height: 28px;color: white;padding:6px;"></i> Submit
                                    </a>
                                </div>
                                <div class="form-button" id="redespatch_button" style="display:none;">
                                    <textarea style="width:45%;height:20%;background-color:white;font-size: 11px;" id="comments" placeholder="Comments"></textarea><font class="mandatory">*</font>
                                    <div id="upload_doc_tag">Click to Upload Documents</div>
                                    <div id="upload_doc_content">
                                        <div id="extra_doc_upload">
                                            <!--label>Resolve Query </label-->
                                            <input type="text" id="upload_doc_name_1" placeholder="DOC NAME" style="width:25%;" />&nbsp
                                            <input type="file" id="upload_doc_1" onclick="setURLRework(this.id);" class="alf_node_ref_img" style="width:30%;display:inline-block;" />
                                            <input type="text" id="upload_doc_url_1" style="width:30%;margin-right:5%;" />
                                            <img class="file_img" id="upload_doc_img_1" src="" />
                                        </div>
                                        <br>
                                        <div id="extra_doc_upload">
                                            <!--label>Resolve Query Doc 2</label-->
                                            <input type="text" id="upload_doc_name_2" placeholder="DOC NAME" style="width:25%;" />&nbsp
                                            <input type="file" id="upload_doc_2" onclick="setURLRework(this.id);" class="alf_node_ref_img" style="width:30%;display:inline-block;" />
                                            <input type="text" id="upload_doc_url_2" style="width:30%;margin-right:5%;" />
                                            <img class="file_img" id="upload_doc_img_2" src="" />
                                        </div>
                                        <br>
                                        <div id="extra_doc_upload">
                                            <!--label>Resolve Query Doc 3</label-->
                                            <input type="text" id="upload_doc_name_3" placeholder="DOC NAME" style="width:25%;" />&nbsp
                                            <input type="file" id="upload_doc_3" onclick="setURLRework(this.id);" class="alf_node_ref_img" style="width:30%;display:inline-block;" />
                                            <input type="text" id="upload_doc_url_3" style="width:30%;margin-right:5%;" />
                                            <img class="file_img" id="upload_doc_img_3" src="" />
                                        </div>
                                    </div>
                                    <br>
                                    <div style="padding-top:1%;">
                                        <a href="javascript:void(0)" onclick='window.location="/tasks/"' class="btn btn-red btn-icon icon-left" style="height:30px;padding-left:40px;">
                                            <i class="icon-entypo-cancel" style="width:30px;height: 28px;color: white;padding:6px;"></i> Cancel
                                        </a>
                                        <a onclick="onSubmitDispatchDocForm('ReworkCompleted','3');" class="btn btn-red btn-icon icon-left" style="height:30px;padding-left:40px;">
                                            <i class="icon-entypo-check" style="width:30px;height: 28px;color: white;padding:6px;"></i> Rework Completed
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="right-pane-task-document-list comment-min" id="right-pane-task-document-list" style="width:21%;border: 1px solid #981b1b;overflow-Y:scroll;background-color: #f4f4f4;">
                            <div class="head" style="background-color: #981B1B;color: whitesmoke;border-bottom: 1px solid whitesmoke;" data-toggle="collapse" data-target="#comment-list-pane">
                                <div class="sub-header">
                                    <div colspan="4"><font style="font-size:15px;"> Documents Attached <i class="entypo-attach"></i></font></div>
                                </div>
                            </div>
                            <div class="document-list-pane" id="document-list-pane" style="background-color:#f4f4f4;"></div>
                        </div>
                        <div class="right-pane-task-comment-list comment-min" id="right-pane-task-comment-list" style="width:21%;overflow-Y:scroll;">
                            <div class="head" style="background-color: #981B1B;color: whitesmoke;border-bottom:1px solid whitesmoke;" data-target="#comment-list-pane">
                                <div class="sub-header">
                                    <div colspan="4"><font style="font-size:15px;"> Comments <i class="entypo-chat"></i></font></div>
                                </div>
                            </div>
                            <div id="comment-list-pane" class="comment-list-pane"></div>
                        </div>
                    </div>
                    <div class="popup"> </div>
                </div>
            </div>
        </div>
    </form>
    {% include "footer.html" %}
</body>
<script type="text/javascript" src="/static/form/commonFunctions.js"></script>
  <script type="text/javascript">
  	
        var taskData = {};
        var memberdetails = '{{ memberDetails    | safe		}}';
        var processid = '{{ processId        | safe		}}';
        var process = '{{ process          | safe		}}';
        var loan_id = "{{ loanId 		 | escapejs 	}}";
        var user_id = "{{ user 		 | escapejs 	}}";
        var task_id = "{{ taskId 		 | escapejs 	}}";
        var processid = "{{ processId	 | safe	   	}}";
        var User = '{{ user             | safe		}}';
        var userid = '{{ userId           | safe		}}';
        var loanId = loan_id;
        var memberId = '{{ memberId         | safe		}}';
        var member_id = memberId;
        var remarks = '{{ Application_Remarks | safe	}}';
        var alf_token = "{{ alf_token	| escapejs }}";
        var allData = (JSON.parse(memberdetails));
        var json_data = allData;
        setScreenHeightWithComments();
        var updocArray = [];
        var dataObj = new FormData();
        var arr = {};
        commentsPopUp(json_data);
		documentsPopUp(json_data);
		loadDispatchDocsData();
		if (json_data.dcphysicalArray){
			for (var i = 0; i < json_data.dcphysicalArray.length; i++) {
				var obj = json_data.dcphysicalArray[i];
				for (var key in obj) {
				    if (document.getElementById(key)) {
				        document.getElementById(key).value = obj[key];
				    }
				}
			}
		}
	
    </script>
</html>
